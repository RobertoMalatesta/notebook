var interpreter,_x_id_x_;importScripts("https://cdn.jsdelivr.net/npm/eval5@1.4.5/umd/eval5.min.js","https://cdn.jsdelivr.net/npm/mathjs@6.6.2/dist/math.min.js","https://cdn.jsdelivr.net/npm/typescript@3.5.3/lib/typescript.js","https://cdn.jsdelivr.net/npm/@quantlib/ql@latest/ql.js");var root={},ctx={};onmessage=function(e){var t=e.data.source,n=e.data.id,r=e.data.useTS,i=e.data.engine;Queue.enqueue(n,e=>new Promise((function(n,s){try{_x_id_x_=e,n(interprete(t,r,i))}catch(e){s(e)}})))};var Queue=function(){function e(){}return e.enqueue=function(e,t){var n=this;return new Promise((function(r,i){n.queue.push({id:e,promise:t,resolve:r,reject:i}),n.dequeue()}))},e.dequeue=function(){var e=this;if(this.workingOnPromise)return!1;var t=this.queue.shift();if(!t)return!1;try{this.workingOnPromise=!0,t.promise(t.id).then((function(n){e.workingOnPromise=!1,t.resolve(n),postMessage({id:t.id,result:n,fn:"output"}),e.dequeue()})).catch((function(n){e.workingOnPromise=!1,t.reject(n),postMessage({id:t.id,result:n,fn:"output"}),e.dequeue()}))}catch(e){this.workingOnPromise=!1,t.reject(e),postMessage({id:t.id,result:e,fn:"output"}),this.dequeue()}return!0},e.queue=[],e.pendingPromise=!1,e}();function interprete(e,t,n){var r;return r=t?ts.transpileModule(e,{compilerOptions:{target:"es5"}}).outputText:e,"eval5"==n?interpreter.evaluate(r):self.eval(r)}function print(e){postMessage({id:_x_id_x_,result:e,fn:"print"})}function table(e){postMessage({id:_x_id_x_,result:e,fn:"table"})}function plot(e){return{type:"plot",data:e}}Object.keys(ql).forEach(e=>{root[e]=ql[e],self[e]=ql[e]}),ctx._x_id_x_=_x_id_x_,ctx.math=math,ctx.fetch=fetch,ctx.print=print,ctx.plot=plot,ctx.table=table,interpreter=new eval5.Interpreter(ctx,{rootContext:root}),postMessage({id:void 0,result:"ready",fn:"oneTimeLoad"});