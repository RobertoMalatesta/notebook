<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="quantitative finance in javascript">
    <meta name="author" content="Jin Yang">
    <meta name="keywords" content="notebook, quantlib.js, math, javascript, quant, quantitative, finance, quantitative finance, mathematical finance, calculus, linear algebra, statistcs, probability, fast fourier transform, interpolation, extrapolation, ode, cashflow, libor, eurlibor, usdlibor, instrument, capfloor, bond, option, swap, swaption, future, monte carlo, finite difference, lattice, equity, market model, short rate, volatility, stochastic process, term structure">
    <meta name="google-site-verification" content="4IrXoRzLpuCL684J3Y19wWtY9W5KqlvwLH5EQuZh1-Q" />
    <title>quantlib.js notebook Â© 2020 Jin Yang</title>
    <link rel="shortcut icon" type="image/jpg" href="/made-in-china.jpg">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@forevolve/bootstrap-dark@1.0.0-alpha.902/dist/css/toggle-bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@forevolve/bootstrap-dark@1.0.0-alpha.902/dist/css/toggle-bootstrap-dark.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.52.0/lib/codemirror.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.52.0/theme/base16-light.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.52.0/theme/base16-dark.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
        
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@quantlibjs">
    <meta name="twitter:creator" content="@quantlibjs">
    <meta name="twitter:title" content="quantlib.js">
    <meta name="twitter:description" content="quantitative finance in javascript">
    <meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/@quantlib/misc@latest/logo.jpg">

    <!-- Facebook -->
    <meta property="og:url" content="https://quantlib.js.org/notebook/#hello.json">
    <meta property="og:title" content="quantlib.js">
    <meta property="og:description" content="quantitative finance in javascript">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://cdn.jsdelivr.net/npm/@quantlib/misc@latest/logo.jpg">
    <meta property="og:image:secure_url" content="https://cdn.jsdelivr.net/npm/@quantlib/misc@latest/logo.jpg">

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-87290595-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-87290595-6');
    </script>
    <style>
      .CodeMirror {
        height: auto;
      }
      .row{
        border-color: #191d21;
        border-width: 0.5px;
        border-style: solid;
        padding-top: 2px;
        padding-bottom: 2px;
        margin-top: 2px;
        margin-bottom: 2px;
      }
    </style>
  </head>
  <body class="bootstrap-dark">
    <nav class="navbar sticky-top navbar-expand-lg navbar-themed">
      <div class="container">
        <a class="navbar-brand" href="/notebook">quantlib.js</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" onclick="add('javascript');"><i class="fa fa-plus"></i></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" onclick="runUp();"><i class="fa fa-angle-double-up"></i></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" onclick="runDown();"><i class="fa fa-angle-double-down"></i></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" onclick="runAll();"><i class="fa fa-fast-forward"></i></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" onclick="clearAll();"><i class="fa fa-refresh"></i></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" data-toggle="modal" data-target="#variables" onclick="varlist();"><i class="fa fa-table"></i></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" onclick="color();"><i class="fa fa-adjust"></i></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" target="_blank" href="/notebook/#hello.json">Tutorial</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" target="_blank" href="/docs">API Docs</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" target="_blank" href="/test-suite">Test Suite</a>
            </li>
          </ul>
          <form class="form-inline">
            <div class="form-group">
              <label class="custom-file">
                <input type="file" id="file-input" class="custom-file-input">
                <span class="custom-file-control"><i class="fa fa-upload"></i></span>
              </label>
            </div>
            <a class="nav-link" onclick="saveAs($('#filename').val(),toJSON());"><i class="fa fa-download"></i></a>
            <input class="form-control" id="filename" type="search" placeholder="notebook.json">
          </form>
        </div>
      </div>
    </nav>
    <div id="notebook" class="container"></div>
    <div class="modal fade" id="variables" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Variables</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div id="vartable" class="modal-body"></div>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@forevolve/bootstrap-dark@1.0.0-alpha.902/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.52.0/lib/codemirror.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.52.0/mode/javascript/javascript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.52.0/mode/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/eval5@1.4.1/umd/eval5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjs@6.6.1/dist/math.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/plotly.js-dist@1.52.3/plotly.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typescript@3.5.3/lib/typescript.js"></script>
    <script>var interpreter,counter=0,cells={},theme="dark",color_enter="#C1E0FF",light_leave="#ffffff",dark_leave="#191d21",selected=NaN;function color(){"dark"===theme?(theme="light",$(".row").css("border-color",light_leave)):(theme="dark",$(".row").css("border-color",dark_leave)),$("body").removeClass();var e="dark"===theme?"bootstrap-dark":"bootstrap";for(id in $("body").addClass(e),cells)cells[id].setOption("theme",`base16-${theme}`);$(`#cell${selected}`).find(".btn-group").show(),$(`#cell${selected}`).css({"border-color":color_enter})}function getEditor(e,t){var l=document.getElementById(e);return CodeMirror.fromTextArea(l,{theme:`base16-${theme}`,lineWrapping:!0,mode:t})}function toggle(e){"javascript"===cells[e].options.mode?cells[e].setOption("mode","markdown"):cells[e].setOption("mode","javascript"),$(`#cell${e} .fa-code`).length>0?($(`#cell${e} .fa-code`).addClass("fa-sticky-note-o"),$(`#cell${e} .fa-code`).removeClass("fa-code")):($(`#cell${e} .fa-sticky-note-o`).addClass("fa-code"),$(`#cell${e} .fa-sticky-note-o`).removeClass("fa-sticky-note-o"))}function eye(e){$(`#in${e}`).is(":visible")?($(`#in${e}`).hide(),$(`#cell${e} .fa-bars`).addClass("fa-ellipsis-v"),$(`#cell${e} .fa-bars`).removeClass("fa-bars")):($(`#in${e}`).show(),$(`#cell${e} .fa-ellipsis-v`).addClass("fa-bars"),$(`#cell${e} .fa-ellipsis-v`).removeClass("fa-ellipsis-v"),setTimeout((function(){cells[e].refresh()}),10))}function add(e,t=NaN){var l=counter++,o=`<div id="cell${l}" class="row" onclick="select(${l});">\n<div class="col-1 px-0">\n<div class="btn-group pull-right" role="group">\n    <button type="button" class="btn btn-sm" onclick="toggle(${l})"><i class="${"javascript"===e?"fa fa-code":"fa fa-sticky-note-o"}"></i></button>\n    <button type="button" class="btn btn-sm" onclick="eye(${l});"><i class="fa fa-bars"></i></button>\n    <button type="button" class="btn btn-sm" onclick="run(${l});"><i class="fa fa-play"></i></button>\n</div>\n</div>\n<div class="col-10">\n<div id="in${l}"><textarea id="edit${l}"></textarea></div>\n<div id="out${l}"></div>\n</div>\n<div class="col-1 px-0">\n<div class="btn-group" role="group">\n    <button type="button" class="btn btn-sm" onclick="$('#cell${l}').insertBefore($('#cell${l}').prev('.row'));"><i class="fa fa-angle-up"></i></button>\n    <button type="button" class="btn btn-sm" onclick="del(${l});"><i class="fa fa-trash-o"></i></button>\n    <button type="button" class="btn btn-sm" onclick="$('#cell${l}').insertAfter($('#cell${l}').next('.row'));"><i class="fa fa-angle-down"></i></button>\n</div>\n</div>\n</div>`;isNaN(selected)?$("#notebook").append(o):$(o).insertAfter(`#cell${selected}`);var n=getEditor(`edit${l}`,e);cells[l]=n,$(`#cell${l} .btn-group`).hide(),$(`#cell${l}`).css({"border-color":"dark"===theme?dark_leave:light_leave})}function del(e){$(`#cell${e}`).remove(),delete cells[e]}function toJSON(){var e={},t=$("#notebook .row");for(let n=0;n<t.length;n++){var l=t[n].id.substr(4),o={};o.input={type:cells[l].options.mode,source:cells[l].getValue()},o.show_editor=$(`#in${l}`).is(":visible"),o.output={type:"html",content:$(`#out${l}`).html()},e[`${t[n].id}`]=o}return JSON.stringify(e,null,"\t")}function saveAs(e,t){""==e&&(e="notebook.json");var l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),l.setAttribute("download",e),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function fromJSON(e){for(cell in cells=[],counter=0,selected=NaN,$("#notebook").empty(),e){var t=parseInt(cell.substr(4),10);counter<t&&(counter=t);var l=e[cell].input.type,o="javascript"===l?"fa fa-code":"fa fa-sticky-note-o";$("#notebook").append(`<div id="cell${t}" class="row" onclick="select(${t});">\n<div class="col-1 px-0">\n<div class="btn-group pull-right" role="group">\n    <button type="button" class="btn btn-sm" onclick="toggle(${t})"><i class="${o}"></i></button>\n    <button type="button" class="btn btn-sm" onclick="eye(${t});"><i class="fa fa-bars"></i></button>\n    <button type="button" class="btn btn-sm" onclick="run(${t});"><i class="fa fa-play"></i></button>\n</div>\n</div>\n<div class="col-10">\n<div id="in${t}"><textarea id="edit${t}"></textarea></div>\n<div id="out${t}">${e[cell].output.content}</div>\n</div>\n<div class="col-1 px-0">\n<div class="btn-group" role="group">\n    <button type="button" class="btn btn-sm" onclick="$('#cell${t}').insertBefore($('#cell${t}').prev('.row'));"><i class="fa fa-angle-up"></i></button>\n
 <button type="button" class="btn btn-sm" onclick="del(${t});"><i class="fa fa-trash-o"></i></button>\n    <button type="button" class="btn btn-sm" onclick="$('#cell${t}').insertAfter($('#cell${t}').next('.row'));"><i class="fa fa-angle-down"></i></button>\n</div>\n</div>\n</div>`);var n=getEditor(`edit${t}`,l);n.setValue(e[cell].input.source),setTimeout((function(){n.refresh()}),10),cells[t]=n,e[cell].show_editor||eye(t)}$(".btn-group").hide(),hover(),counter++}function select(e){selected!=e&&($(`#cell${selected}`).find(".btn-group").hide(),$(`#cell${selected}`).css({"border-color":"dark"===theme?dark_leave:light_leave}),selected=e)}function hover(){$(document).on({mouseenter:function(){$(this).find(".btn-group").show(),$(this).css({"border-color":color_enter})},mouseleave:function(){$(this).attr("id").substr(4)!=selected&&($(this).find(".btn-group").hide(),$(this).css({"border-color":"dark"===theme?dark_leave:light_leave}))}},".row")}function readSingleFile(e){var t=e.target.files[0];if(t){var l=new FileReader;l.onload=function(e){var l=e.target.result;try{fromJSON(JSON.parse(l)),$("#filename").val(t.name)}catch(e){console.log(e)}},l.readAsText(t)}}function load(e){try{fetch(e).then(e=>e.json()).then(e=>{fromJSON(e)})}catch(e){console.log(e)}}function output(e,t){if(void 0!==e&&void 0!==e.type)switch(e.type){case"plot":Plotly.newPlot(`ot${t}`,e.data,e.layout,e.option);break;case"table":var l=`${e.data}`;$(`#ot${t}`).append(l);break;case"text":l=`<code>${e.data}</code>`;$(`#ot${t}`).append(l);break;default:l=`<code>${e}</code>`;$(`#ot${t}`).append(l)}else{l=`<code>${e}</code>`;$(`#ot${t}`).append(l)}}function print(e){return{type:"text",data:e}}function varlist(){var e=[];for(p
in interpreter.globalContext)"ql"!=p&&"math"!=p&&"plot"!=p&&"print"!=p&&"table"!=p&&e.push({name:p,type:typeof interpreter.globalContext[p],value:interpreter.globalContext[p]});var t=table(e);$("#vartable").empty(),$("#vartable").append(t.data)}function table(e){if(Array.isArray(e)){var t='<table class="table table-striped">',l=e[0];for(td in t+="<thead><tr>",l)t+=`<th>${td}</th>`;t+="</tr></thead><tbody>";for(let l=0;l<e.length;l++){for(td in t+="<tr>",e[l])t+=`<td>${e[l][td]}</td>`;t+="</tr>"}return{type:"table",data:t+="</tbody></table>"}}return print(e)}function plot(e,t,l={displaylogo:!1,responsive:!0}){return{type:"plot",data:e,layout:t,option:l}}function run(e){$(`#out${e}`).empty(),$(`#out${e}`).append(`<div id=ot${e}></div>`);var t=cells[e].getValue();if("javascript"===cells[e].options.mode)try{var l=ts.transpileModule(t,{compilerOptions:{target:"es5"}}).outputText;output(o=interpreter.evaluate(`with(ql){${l}}`),e)}catch(n){$(`#ot${e}`).append(`<code>${n.message}</code>`)}else{$(`#in${e}`).is(":visible")&&($(`#in${e}`).hide(),$(`#cell${e} .fa-bars`).addClass("fa-ellipsis-v"),$(`#cell${e} .fa-bars`).removeClass("fa-bars"));try{var o=marked(t);$(`#out${e}`).append(`${o}`);var n=document.getElementById(`out${e}`);renderMathInElement(n,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})}catch(n){$(`#out${e}`).append(`<pre>${n.message}</pre>`)}}}function next(){var e=$("#notebook .row"),t=[];for(let o=0;o<e.length;o++){var l=parseInt(e[o].id.substr(4),10);t.push(l)}var o=t.indexOf(selected);-1!=o&&select(t[o+1])}function runUp(){var e=$("#notebook .row");for(let l=0;l<e.length;l++){var t=parseInt(e[l].id.substr(4),10);if(t==selected)break;run(t)}}function runDown(){var e=$("#notebook .row"),t=[];for(let o=0;o<e.length;o++){var l=parseInt(e[o].id.substr(4),10);t.push(l)}for(let e=t.indexOf(selected);e<t.length;e++)run(t[e])}function runAll(){var e=$("#notebook .row");for(let t=0;t<e.length;t++){run(e[t].id.substr(4))}}function runMD(){var e=$("#notebook .row");for(let l=0;l<e.length;l++){var t=e[l].id.substr(4);0===$(`#cell${t} .fa-code`).length&&run(t)}}function runCode(){var e=$("#notebook .row");for(let l=0;l<e.length;l++){var t=e[l].id.substr(4);$(`#cell${t} .fa-code`).length>0&&run(t)}}function clearAll(){var e=$("#notebook .row");for(let l=0;l<e.length;l++){var t=e[l].id.substr(4);$(`#out${t}`).empty(),$(`#in${t}`).is(":visible")||($(`#in${t}`).show(),$(`#cell${t} .fa-ellipsis-v`).addClass("fa-bars"),$(`#cell${t} .fa-ellipsis-v`).removeClass("fa-ellipsis-v"),setTimeout((function(){cells[t].refresh()}),10))}}function clearCode(){var e=$("#notebook .row");for(let l=0;l<e.length;l++){var t=e[l].id.substr(4);$(`#cell${t} .fa-code`).length>0&&($(`#out${t}`).empty(),$(`#in${t}`).is(":visible")||($(`#in${t}`).show(),$(`#cell${t} .fa-ellipsis-v`).addClass("fa-bars"),$(`#cell${t} .fa-ellipsis-v`).removeClass("fa-ellipsis-v")))}}function init(){document.getElementById("file-input").addEventListener("change",readSingleFile,!1);var e=new marked.Renderer;e.link=function(e,t,l){var o=marked.Renderer.prototype.link.apply(this,arguments);return o.replace("<a","<a target='_blank'")},marked.setOptions({renderer:e}),import("https://cdn.jsdelivr.net/npm/@quantlib/ql@latest/ql.mjs").then(e=>{var t={ql:e,math:math,plot:plot,print:print,table:table};interpreter=new eval5.Interpreter(t);var l=window.location.hash;if(""!==l){var o=(l=l.substr(1)).split("/"),n=o[o.length-1];$("#filename").val(n),load(l)}hover()})}init();</script>
  </body>
</html>
