<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="quantitative finance in javascript">
    <meta name="author" content="Jin Yang">
    <meta name="google-site-verification" content="4IrXoRzLpuCL684J3Y19wWtY9W5KqlvwLH5EQuZh1-Q" />
    <title>quantlib.js - quantitative finance in javascript Â© 2020 Jin Yang</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.52.0/lib/codemirror.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
        
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@quantlibjs">
    <meta name="twitter:creator" content="@quantlibjs">
    <meta name="twitter:title" content="quantlib.js">
    <meta name="twitter:description" content="quantitative finance in javascript">
    <meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/@quantlib/misc@latest/logo.jpg">

    <!-- Facebook -->
    <meta property="og:url" content="https://quantlib.js.org/notebook/#hello.json">
    <meta property="og:title" content="quantlib.js">
    <meta property="og:description" content="quantitative finance in javascript">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://cdn.jsdelivr.net/npm/@quantlib/misc@latest/logo.jpg">
    <meta property="og:image:secure_url" content="https://cdn.jsdelivr.net/npm/@quantlib/misc@latest/logo.jpg">

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-87290595-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-87290595-6');
    </script>
    <style>
      .CodeMirror {
        height: auto;
      }
      .row{
        border-color: #ffffff;
        border-width: 0.5px;
        border-style: solid;
        padding-top: 2px;
        padding-bottom: 2px;
        margin-top: 2px;
        margin-bottom: 2px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar sticky-top navbar-expand-lg navbar-light bg-light">
      <div class="container">
        <a class="navbar-brand" href="/notebook">quantlib.js</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" onclick="add('javascript');"><i class="fa fa-plus"></i></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" onclick="runAll();"><i class="fa fa-fast-forward"></i></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" onclick="clearAll();"><i class="fa fa-refresh"></i></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" onclick="saveAs('notebook.json',toJSON());"><i class="fa fa-download"></i></a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <div class="custom-file">
              <input type="file" class="custom-file-input" id="file-input">
              <label class="custom-file-label" for="file-input">Choose file...</label>
            </div>
          </form>
        </div>
      </div>
    </nav>
    <div id="notebook" class="container"></div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.52.0/lib/codemirror.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.52.0/mode/javascript/javascript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.52.0/mode/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/eval5@1.3.0/umd/eval5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjs@6.6.1/dist/math.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/plotly.js-dist@1.52.3/plotly.min.js"></script>
    <script>var counter=0,cells={};function getEditor(t,e){var n=document.getElementById(t);return CodeMirror.fromTextArea(n,{lineWrapping:!0,mode:e})}function toggle(t){"javascript"===cells[t].options.mode?cells[t].setOption("mode","markdown"):cells[t].setOption("mode","javascript"),$(`#cell${t} .fa-code`).length>0?($(`#cell${t} .fa-code`).addClass("fa-sticky-note-o"),$(`#cell${t} .fa-code`).removeClass("fa-code")):($(`#cell${t} .fa-sticky-note-o`).addClass("fa-code"),$(`#cell${t} .fa-sticky-note-o`).removeClass("fa-sticky-note-o"))}function eye(t){$(`#in${t}`).is(":visible")?($(`#in${t}`).hide(),$(`#cell${t} .fa-bars`).addClass("fa-ellipsis-v"),$(`#cell${t} .fa-bars`).removeClass("fa-bars")):($(`#in${t}`).show(),$(`#cell${t} .fa-ellipsis-v`).addClass("fa-bars"),$(`#cell${t} .fa-ellipsis-v`).removeClass("fa-ellipsis-v"))}function add(t){var e=counter++,n="javascript"===t?"fa fa-code":"fa fa-sticky-note-o";$("#notebook").append(`<div id="cell${e}" class="row">\n<div class="col-1 px-0">\n<div class="btn-group pull-right" role="group">\n    <button type="button" class="btn btn-light btn-sm" onclick="toggle(${e})"><i class="${n}"></i></button>\n    <button type="button" class="btn btn-light btn-sm" onclick="eye(${e});"><i class="fa fa-bars"></i></button>\n    <button type="button" class="btn btn-light btn-sm" onclick="run(${e});"><i class="fa fa-play"></i></button>\n</div>\n</div>\n<div class="col-10">\n<div id="in${e}"><textarea id="edit${e}"></textarea></div>\n<div id="out${e}"></div>\n</div>\n<div class="col-1 px-0">\n<div class="btn-group" role="group">\n    <button type="button" class="btn btn-light btn-sm" onclick="$('#cell${e}').insertBefore($('#cell${e}').prev('.row'));"><i class="fa fa-angle-up"></i></button>\n    <button type="button" class="btn btn-light btn-sm" onclick="del(${e});"><i class="fa fa-trash-o"></i></button>\n    <button type="button" class="btn btn-light btn-sm" onclick="$('#cell${e}').insertAfter($('#cell${e}').next('.row'));"><i class="fa fa-angle-down"></i></button>\n</div>\n</div>\n</div>`);var l=getEditor(`edit${e}`,t);cells[e]=l}function del(t){$(`#cell${t}`).remove(),delete cells[t]}function toJSON(){var t={},e=$("#notebook .row");for(let o=0;o<e.length;o++){var n=e[o].id.substr(4),l={};l.input={type:cells[n].options.mode,source:cells[n].getValue()},l.show_editor=$(`#in${n}`).is(":visible"),l.output={type:"html",content:$(`#out${n}`).html()},t[`${e[o].id}`]=l}return JSON.stringify(t,null,"\t")}function saveAs(t,e){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function fromJSON(t){for(cell in cells=[],counter=0,$("#notebook").empty(),t){var e=parseInt(cell.substr(4),10);counter<e&&(counter=e);var n=t[cell].input.type,l="javascript"===n?"fa fa-code":"fa fa-sticky-note-o";$("#notebook").append(`<div id="cell${e}" class="row">\n<div class="col-1 px-0">\n<div class="btn-group pull-right" role="group">\n    <button type="button" class="btn btn-light btn-sm" onclick="toggle(${e})"><i class="${l}"></i></button>\n    <button type="button" class="btn btn-light btn-sm" onclick="eye(${e});"><i class="fa fa-bars"></i></button>\n    <button type="button" class="btn btn-light btn-sm" onclick="run(${e});"><i class="fa fa-play"></i></button>\n</div>\n</div>\n<div class="col-10">\n<div id="in${e}"><textarea id="edit${e}"></textarea></div>\n<div id="out${e}">${t[cell].output.content}</div>\n</div>\n<div class="col-1 px-0">\n<div class="btn-group" role="group">\n    <button type="button" class="btn btn-light btn-sm" onclick="$('#cell${e}').insertBefore($('#cell${e}').prev('.row'));"><i class="fa fa-angle-up"></i></button>\n    <button type="button" class="btn btn-light btn-sm" onclick="del(${e});"><i class="fa fa-trash-o"></i></button>\n    <button type="button" class="btn btn-light btn-sm" onclick="$('#cell${e}').insertAfter($('#cell${e}').next('.row'));"><i class="fa fa-angle-down"></i></button>\n</div>\n</div>\n</div>`);var o=getEditor(`edit${e}`,n);o.setValue(t[cell].input.source),cells[e]=o,t[cell].show_editor||eye(e)}$(".btn-group").hide(),hover(),counter++}function hover(){$(document).on({mouseenter:function(){$(this).find(".btn-group").show(),$(this).css({"border-color":"#C1E0FF"})},mouseleave:function(){$(this).find(".btn-group").hide(),$(this).css({"border-color":"#ffffff"})}},".row")}function readSingleFile(t){var e=t.target.files[0];if(e){var n=new FileReader;n.onload=function(t){var e=t.target.result;try{fromJSON(JSON.parse(e))}catch(t){console.log(t)}},n.readAsText(e)}}function load(t){try{fetch(t).then(t=>t.json()).then(t=>{fromJSON(t)})}catch(t){console.log(t)}}function output(t,e){if(void 0!==t&&void 0!==t.type)switch(t.type){case"plot":Plotly.newPlot(`ot${e}`,t.data,t.layout,t.option);break;case"table":break;default:var n=`<code>${t}</code>`;$(`#ot${e}`).append(n)}else{n=`<code>${t}</code>`;$(`#ot${e}`).append(n)}}function print(t){return{type:"text",data:t}}function table(t){return{type:"table",data:t}}function plot(t,e,n){return{type:"plot",data:t,layout:e}}function run(t){$(`#out${t}`).empty(),$(`#out${t}`).append(`<div id=ot${t}></div>`);var e=cells[t].getValue();if("javascript"===cells[t].options.mode)try{output(n=interpreter.evaluate(e),t)}catch(l){console.log(l),$(`#ot${t}`).append(`<code>${l.message}</code>`)}else{$(`#in${t}`).is(":visible")&&($(`#in${t}`).hide(),$(`#cell${t} .fa-bars`).addClass("fa-ellipsis-v"),$(`#cell${t} .fa-bars`).removeClass("fa-bars"));try{var n=marked(e);$(`#out${t}`).append(`${n}`);var l=document.getElementById(`out${t}`);renderMathInElement(l,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})}catch(l){console.log(l),$(`#out${t}`).append(`<pre>${l.message}</pre>`)}}}function runAll(){var t=$("#notebook .row");for(let e=0;e<t.length;e++){run(t[e].id.substr(4))}}function clearAll(){var t=$("#notebook .row");for(let n=0;n<t.length;n++){var e=t[n].id.substr(4);$(`#out${e}`).empty(),$(`#in${e}`).is(":visible")||($(`#in${e}`).show(),$(`#cell${e} .fa-ellipsis-v`).addClass("fa-bars"),$(`#cell${e} .fa-ellipsis-v`).removeClass("fa-ellipsis-v"))}}var interpreter=new eval5.Interpreter(window);document.getElementById("file-input").addEventListener("change",readSingleFile,!1),import("https://cdn.jsdelivr.net/npm/@quantlib/ql@latest/ql.mjs").then(t=>{window.ql=t;var e=window.location.hash;""!==e&&load(e=e.substr(1)),hover()});</script>
    </body>
</html>
