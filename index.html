<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="quantitative finance in javascript">
    <meta name="author" content="Jin Yang">
    <meta name="keywords" content="quantlib.js, notebook, math, javascript, quant, quantitative, finance, quantitative finance, mathematical finance">
    <meta name="google-site-verification" content="4IrXoRzLpuCL684J3Y19wWtY9W5KqlvwLH5EQuZh1-Q" />
    <title>武统台湾，留岛不留人 © 2020 Jin Yang</title>
    <link rel="shortcut icon" type="image/png" href="/cn.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@forevolve/bootstrap-dark@1.0.0-alpha.981/dist/css/toggle-bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@forevolve/bootstrap-dark@1.0.0-alpha.981/dist/css/toggle-bootstrap-dark.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.52.2/lib/codemirror.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.52.2/theme/base16-light.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.52.2/theme/base16-dark.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
        
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-87290595-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-87290595-6');
    </script>
    <style>
      .CodeMirror {
        height: auto;
      }
      .cell.row{
        border-color: #191d21;
        border-width: 0.5px;
        border-style: solid;
        padding: 2px;
        margin: 2px;
      }
      body {
        position: relative;

      }
      body::-webkit-scrollbar { width: 0 !important }
      .input {
        padding-top: 2px;
      }
      #toc {
        top: 56px;
        left: 20px;
      }
      nav[data-toggle="toc"] .nav > li > a {
        display: block;
        padding: 4px 20px;
        font-size: 16px;
        font-weight: 500;
        color: #767676;
      }
      nav[data-toggle="toc"] .nav > li > a:hover,
      nav[data-toggle="toc"] .nav > li > a:focus {
        padding-left: 19px;
        color: #563d7c;
        text-decoration: none;
        background-color: transparent;
        border-left: 1px solid #563d7c;
      }
      nav[data-toggle="toc"] .nav-link.active,
      nav[data-toggle="toc"] .nav-link.active:hover,
      nav[data-toggle="toc"] .nav-link.active:focus {
        padding-left: 18px;
        font-weight: bold;
        color: #563d7c;
        background-color: transparent;
        border-left: 2px solid #563d7c;
      }
      nav[data-toggle="toc"] .nav-link + ul {
        display: none; /* Hide by default, but at >768px, show it */
        padding-bottom: 10px;
      }
      nav[data-toggle="toc"] .nav .nav > li > a {
        padding-top: 1px;
        padding-bottom: 1px;
        padding-left: 30px;
        font-size: 14px;
        font-weight: normal;
      }
      nav[data-toggle="toc"] .nav .nav > li > a:hover,
      nav[data-toggle="toc"] .nav .nav > li > a:focus {
        padding-left: 29px;
      }
      nav[data-toggle="toc"] .nav .nav > li > .active,
      nav[data-toggle="toc"] .nav .nav > li > .active:hover,
      nav[data-toggle="toc"] .nav .nav > li > .active:focus {
        padding-left: 28px;
        font-weight: 500;
      }
      nav[data-toggle="toc"] .nav-link.active + ul {
        display: block;
      }
      blockquote {
        border-left: 4px solid #DDD;
        padding: 0 15px;
        color: #777;
      }
    </style>
  </head>
  <body class="bootstrap-dark" data-spy="scroll" data-target="#toc" data-offset="56">
    <nav class="navbar sticky-top navbar-expand-lg navbar-themed">
      <div class="container-fluid">
        <a class="navbar-brand" href="/notebook">勿謂言之不預也</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" onclick="add('javascript');"><i class="fa fa-plus"></i></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" onclick="runUp();"><i class="fa fa-angle-double-up"></i></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" onclick="runDown();"><i class="fa fa-angle-double-down"></i></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" onclick="runAll();"><i class="fa fa-forward"></i></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" onclick="clearAll();"><i class="fa fa-close"></i></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" target="_blank" href="/notebook/#tutorial.en.json">教程 <i class="fa fa-external-link"></i></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" target="_blank" href="/docs">文档 <i class="fa fa-external-link"></i></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" target="_blank" href="/test-suite">测试 <i class="fa fa-external-link"></i></a>
            </li>
          </ul>
          <form class="form-inline">
            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" id="nextcell">
              <label class="custom-control-label" for="nextcell"></label>
            </div>
            <div class="custom-control custom-switch">
              <input type="checkbox" class="custom-control-input" id="switchengine">
              <label class="custom-control-label" for="switchengine"></label>
            </div>
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" onclick="select(NaN);"><i id="browser"></i></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" onclick="toggleLock();"><i id="lock" class="fa fa-unlock-alt"></i></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" onclick="toggleTS();"><i id="usets" class="fa fa-toggle-off"></i></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" onclick="toggleToc();"><i id="layout" class="fa fa-columns"></i></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" onclick="color();"><i class="fa fa-adjust"></i></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" onclick="$('#file-input').click();"><i class="fa fa-upload"></i></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" onclick="saveAs($('#filename').val(),toJSON());"><i class="fa fa-download"></i></a>
              </li>
            </ul>
            <input class="form-control" id="filename" type="search" placeholder="武统台湾.json">
          </form>
        </div>
      </div>
    </nav>
    <div class="container-fluid">
      <div class="row no-gutters" id="root">
        <div id="tocroot" class="col-xl-2 hidden-lg-down">
          <nav id="toc" class="sticky-top" data-toggle="toc"></nav>
        </div>
        <div id="nbroot" class="col-lg-12 col-xl-10">
          <div id="notebook" class="container-fluid"></div>
        </div>
      </div>
    </div>
    <input type="file" id="file-input" style="display: none;">
    <iframe id="sandbox" sandbox="allow-same-origin allow-scripts" src="/notebook/sandbox.html" style="display: none;"></iframe>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@forevolve/bootstrap-dark@1.0.0-alpha.981/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.52.2/lib/codemirror.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.52.2/mode/javascript/javascript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.52.2/mode/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@0.8.2/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/plotly.js-dist@1.53.0/plotly.min.js"></script>
    <script>var sandbox,ts,eval5,evil,file,counter=0,cells={},theme="dark",color_enter="#C1E0FF",light_leave="#ffffff",dark_leave="#191d21",selected=NaN,running=NaN,offset=55,engine="eval5",useTS=!1,reader=new FileReader,default_file="武统台湾.json",nextcell=!0,scrollcell=!1,locked=!1,history={};function color(){"dark"===theme?(theme="light",$(".row").css("border-color",light_leave)):(theme="dark",$(".row").css("border-color",dark_leave)),$("body").removeClass();var e="dark"===theme?"bootstrap-dark":"bootstrap";for(id in $("body").addClass(e),cells)cells[id].setOption("theme",`base16-${theme}`);$(`#cell${selected}`).find(".btn-group").show(),$(`#cell${selected}`).css({"border-color":color_enter})}function setTheme(e){"light"===(theme=e)?$(".row").css("border-color",light_leave):$(".row").css("border-color",dark_leave),$("body").removeClass();var t="dark"===theme?"bootstrap-dark":"bootstrap";for(id in $("body").addClass(t),cells)cells[id].setOption("theme",`base16-${theme}`);$(`#cell${selected}`).find(".btn-group").show(),$(`#cell${selected}`).css({"border-color":color_enter})}function getEditor(e,t,o=!1){var n=document.getElementById(e);return CodeMirror.fromTextArea(n,{theme:`base16-${theme}`,lineWrapping:!0,mode:t,readOnly:o})}function toggle(e){locked||("javascript"===cells[e].options.mode?cells[e].setOption("mode","markdown"):cells[e].setOption("mode","javascript"),$(`#celltype${e}`).toggleClass("fa-sticky-note-o"),$(`#celltype${e}`).toggleClass("fa-code"))}function eye(e){$(`#in${e}`).is(":visible")?$(`#in${e}`).hide():($(`#in${e}`).show(),setTimeout((function(){cells[e].refresh()}),10)),$(`#showeditor${e}`).toggleClass("fa-ellipsis-v"),$(`#showeditor${e}`).toggleClass("fa-bars")}function add(e,t=NaN){if(!locked){var o=counter++,n=`<div id="cell${o}" class="cell row no-gutters" onclick="select(${o});">\n<div class="col-xl-1 hidden-lg-down px-0">\n<div class="btn-group pull-right" role="group">\n  <button type="button" class="btn btn-sm" onclick="toggle(${o})"><i id="celltype${o}" class="${"javascript"===e?"fa fa-code":"fa fa-sticky-note-o"}"></i></button>\n  <button type="button" class="btn btn-sm" onclick="eye(${o});"><i id="showeditor${o}" class="fa fa-bars"></i></button>\n  <button type="button" class="btn btn-sm" onclick="run(${o});"><i class="fa fa-play"></i></button>\n</div>\n</div>\n<div class="col-lg-12 col-xl-10 px-0">\n<div id="in${o}" class="input"><textarea id="edit${o}"></textarea></div>\n<div id="out${o}"></div>\n</div>\n<div class="col-xl-1 hidden-lg-down px-0">\n<div class="btn-group" role="group">\n  <button type="button" class="btn btn-sm" onclick="moveUp(${o});"><i class="fa fa-angle-up"></i></button>\n  <button type="button" class="btn btn-sm" onclick="del(${o});"><i class="fa fa-trash-o"></i></button>\n  <button type="button" class="btn btn-sm" onclick="moveDown(${o});"><i class="fa fa-angle-down"></i></button>\n</div>\n</div>\n</div>`;isNaN(selected)?$("#notebook").append(n):$(n).insertAfter(`#cell${selected}`);var l=getEditor(`edit${o}`,e);cells[o]=l,$(`#cell${o} .btn-group`).hide(),$(`#cell${o}`).css({"border-color":"dark"===theme?dark_leave:light_leave})}}function del(e){locked||($(`#cell${e}`).remove(),delete cells[e])}function moveUp(e){locked||$(`#cell${e}`).insertBefore($(`#cell${e}`).prev(".row"))}function moveDown(e){locked||$(`#cell${e}`).insertAfter($(`#cell${e}`).next(".row"))}function toJSON(){var e={};e.setting={interpreter:engine,typescript:useTS,locked:locked},e.notebook={};for(var t=$("#notebook .row"),o=0;o<t.length;o++){var n=t[o].id.substr(4),l={};l.input={type:cells[n].options.mode,source:cells[n].getValue()},l.show_editor=$(`#in${n}`).is(":visible"),l.output={type:"html",content:$(`#out${n}`).html()},e.notebook[`${t[o].id}`]=l}return JSON.stringify(e,null,"\t")}function saveAs(e,t){""==e&&(e=default_file);var o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function fromJSON(e){for(cell in cells=[],counter=0,selected=NaN,running=NaN,"eval5"==(engine=e.setting.interpreter)?$("#switchengine").prop("checked",!0):$("#switchengine").prop("checked",!1),useTS!=e.setting.typescript&&($("#usets").toggleClass("fa-toggle-on"),$("#usets").toggleClass("fa-toggle-off")),useTS=e.setting.typescript,locked!=e.setting.locked&&($("#lock").toggleClass("fa-lock"),$("#lock").toggleClass("fa-unlock-alt")),locked=e.setting.locked,$("#notebook").empty(),e.notebook){var t=parseInt(cell.substr(4),10);counter<t&&(counter=t);var o=e.notebook[cell].input.type,n="javascript"===o?"fa fa-code":"fa fa-sticky-note-o";$("#notebook").append(`<div id="cell${t}" class="cell row no-gutters" onclick="select(${t});">\n<div class="col-xl-1 hidden-lg-down px-0">\n<div class="btn-group pull-right" role="group">\n  <button type="button" class="btn btn-sm" onclick="toggle(${t})"><i id="celltype${t}" class="${n}"></i></button>\n  <button type="button" class="btn btn-sm" onclick="eye(${t});"><i id="showeditor${t}" class="fa fa-bars"></i></button>\n  <button type="button" class="btn btn-sm" onclick="run(${t});"><i class="fa fa-play"></i></button>\n</div>\n</div>\n<div class="col-lg-12 col-xl-10 px-0">\n<div id="in${t}" class="input"><textarea id="edit${t}"></textarea></div>\n<div id="out${t}">${e.notebook[cell].output.content}</div>\n</div>\n<div class="col-xl-1 hidden-lg-down px-0">\n<div class="btn-group" role="group">\n <button type="button" class="btn btn-sm" onclick="moveUp(${t});"><i class="fa fa-angle-up"></i></button>\n  <button type="button" class="btn btn-sm" onclick="del(${t});"><i class="fa fa-trash-o"></i></button>\n  <button type="button" class="btn btn-sm" onclick="moveDown(${t});"><i class="fa fa-angle-down"></i></button>\n</div>\n</div>\n</div>`);var l=getEditor(`edit${t}`,o,locked);l.setValue(e.notebook[cell].input.source),setTimeout((function(){l.refresh()}),10),cells[t]=l,e.notebook[cell].show_editor||eye(t)}$(".btn-group").hide(),$(".cell.row").css({"border-color":"dark"===theme?dark_leave:light_leave}),hover(),counter++,updateToc()}function select(e){selected!=e&&($(`#cell${selected}`).find(".btn-group").hide(),$(`#cell${selected}`).css({"border-color":"dark"===theme?dark_leave:light_leave}),$(`#cell${selected}`).css({"border-left-width":"0.5px"}),$(`#cell${selected}`).css({"margin-left":"2px"}),selected=e,"xl"==getResponsiveBreakpoint()&&$(`#cell${e}`).find(".btn-group").show(),$(`#cell${e}`).css({"border-color":color_enter}),$(`#cell${e}`).css({"border-left-width":"6px"}),$(`#cell${e}`).css({"margin-left":"-3.5px"}))}function hover(){$(document).on({mouseenter:function(){"xl"==getResponsiveBreakpoint()&&$(this).find(".btn-group").show(),$(this).css({"border-color":color_enter})},mouseleave:function(){$(this).attr("id").substr(4)!=selected&&("xl"==getResponsiveBreakpoint()&&$(this).find(".btn-group").hide(),$(this).css({"border-color":"dark"===theme?dark_leave:light_leave}))}},".cell.row")}function readSingleFile(e){(file=e.target.files[0])&&reader.readAsText(file)}function load(e){try{fetch(e).then(e=>e.json()).then(e=>{fromJSON(e)})}catch(e){console.log(e)}}function output(e,t){if(void 0!==e)switch(e.type){case"plot":Plotly.newPlot(`ot${t}`,e.data,e.layout,e.option);break;case"table":var o=`${e.data}`;$(`#ot${t}`).append(o);break;case"text":o=`<code>${e.data}</code>`;$(`#ot${t}`).append(o);break;default:smart(e,t)}else if($(`#ot${t}`).is(":empty")){o=`<code>${e}</code>`;$(`#ot${t}`).append(o)}}function smart(e,t){switch(typeof e){case"object":e instanceof sandbox.Date?o=`<code>${e.toLocaleDateString()}</code>`:e instanceof sandbox.Array?e.every(e=>"number"==typeof e||"string"==typeof e)?o=`${JSON.stringify(e,null,2)}`:e.every(e=>e instanceof sandbox.Array)&&(o=`${JSON.stringify(e,null,2)}`):o=`<code>${e}</code>`,$(`#ot${t}`).append(o);break;default:var o=`<code>${e}</code>`;$(`#ot${t}`).append(o)}}function print(e){var t=`<code>${e}<br></code>`;$(`#ot${running}`).append(t)}function table(e){if(!Array.isArray(e))return print(e);var t='<table class="table table-striped">',o=e[0];for(td in t+="<thead><tr>",o)t+=`<th>${td}</th>`;t+="</tr></thead><tbody>";for(var n=0;n<e.length;n++){for(td in t+="<tr>",e[n])t+=`<td>${e[n][td]}</td>`;t+="</tr>"}var l=`${t+="</tbody></table>"}`;$(`#ot${running}`).append(l)}function plot(e,t={},o={}){return t.plot_bgcolor="dark"==theme?dark_leave:light_leave,t.paper_bgcolor="dark"==theme?dark_leave:light_leave,o.displaylogo=!1,o.responsive=!0,{type:"plot",data:e,layout:t,option:o}}function view(e){$(`#ot${running}`).append('<input type="range" class="custom-range">')}function run(e){if(!locked){running=e,$(`#out${e}`).empty(),$(`#out${e}`).append(`<div id=ot${e}></div>`);var t=cells[e].getValue();if("javascript"===cells[e].options.mode)try{var o=`with(ql){\n${useTS?ts.transpileModule(t,{compilerOptions:{target:"es5"}}).outputText:t}\n}`;output(n="eval5"==engine?eval5.evaluate(o):evil(o),e)}catch(l){$(`#ot${e}`).append(`<code>${l.message}</code>`)}else{$(`#in${e}`).is(":visible")&&($(`#in${e}`).hide(),$(`#cell${e} .fa-bars`).addClass("fa-ellipsis-v"),$(`#cell${e} .fa-bars`).removeClass("fa-bars"));try{var n=protectMath(t);$(`#ot${e}`).append(`${n}`);var l=document.getElementById(`ot${e}`);renderMathInElement(l,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})}catch(l){$(`#out${e}`).append(`<pre>${l.message}</pre>`)}}nextcell&&(event.stopPropagation(),next()),updateToc()}}function next(){var e=$(".cell.row"),t=[];for(let n=0;n<e.length;n++){var o=parseInt(e[n].id.substr(4),10);t.push(o)}var n=t.indexOf(running);if(-1!=n&&n!=t.length-1){var l=t[n+1];select(l),scrollcell&&$("html, body").scrollTop($(`#cell${l}`).offset().top-55)}}function runUp(){if(!locked)for(var e=$("#notebook .row"),t=0;t<e.length;t++){var o=parseInt(e[t].id.substr(4),10);if(o==selected)break;run(o)}}function runDown(){if(!locked){for(var e=$("#notebook .row"),t=[],o=0;o<e.length;o++){var n=parseInt(e[o].id.substr(4),10);t.push(n)}var l=t.indexOf(selected);if(l>-1)for(o=l;o<t.length;o++)run(t[o])}}function runAll(){if(!locked){var e=nextcell;nextcell=!1;for(var t=$("#notebook .row"),o=0;o<t.length;o++){run(t[o].id.substr(4))}nextcell=e}}function runMD(){for(var e=$("#notebook .row"),t=0;t<e.length;t++){var o=e[t].id.substr(4);$(`#celltype${o}`).hasClass("fa-code")&&run(o)}}function updateToc(){if("xl"==getResponsiveBreakpoint()){$("#toc").empty();var e=createChildNavList($("#toc")),t=getTopLevel($("#notebook"));populateNav(e,t,getHeadings($("#notebook"),t)),$('[data-spy="scroll"]').each((function(){$(this).scrollspy("refresh")})),$("#toc a").on("click",(function(e){e.preventDefault(),$("html, body").scrollTop($($(this).attr("href")).offset().top-offset)}))}}function toggleToc(){$("#tocroot").toggle(),$("#nbroot").toggleClass("col-xl-10"),$("#nbroot").toggleClass("col-xl-12")}function runCode(){for(var e=$("#notebook .row"),t=0;t<e.length;t++){var o=e[t].id.substr(4);$(`#celltype${o}`).hasClass("fa-code")&&run(o)}}function clearAll(){if(!locked){for(var e=$("#notebook .row"),t=0;t<e.length;t++){var o=e[t].id.substr(4);$(`#out${o}`).empty(),$(`#in${o}`).is(":visible")||($(`#in${o}`).show(),$(`#cell${o} .fa-ellipsis-v`).addClass("fa-bars"),$(`#cell${o} .fa-ellipsis-v`).removeClass("fa-ellipsis-v"),setTimeout((function(){cells[o].refresh()}),10))}$("#toc").empty()}}function clearCode(){for(var e=$("#notebook .row"),t=0;t<e.length;t++){var o=e[t].id.substr(4);$(`#celltype${o}`).hasClass("fa-code")&&($(`#out${o}`).empty(),$(`#in${o}`).is(":visible")||($(`#in${o}`).show(),$(`#cell${o} .fa-ellipsis-v`).addClass("fa-bars"),$(`#cell${o} .fa-ellipsis-v`).removeClass("fa-ellipsis-v")))}}function clearCell(e){$(`#out${e}`).empty(),$(`#in${e}`).is(":visible")||($(`#in${e}`).show(),$(`#cell${e} .fa-ellipsis-v`).addClass("fa-bars"),$(`#cell${e} .fa-ellipsis-v`).removeClass("fa-ellipsis-v"))}function compass(){NaN!=selected&&$("html, body").scrollTop($(`#cell${selected}`).offset().top-offset)}function varlist(){var e=[];for(p in eval5.globalContext)"ql"!=p&&"console"!=p&&"math"!=p&&"plot"!=p&&"print"!=p&&"table"!=p&&e.push({name:p,type:typeof eval5.globalContext[p],value:eval5.globalContext[p]});table(e)}function findOrFilter(e,t){var o=e.find(t);return e.filter(t).add(o).filter(":not([data-toc-skip])")}function createChildNavList(e){var t=$('<ul class="nav navbar-nav"></ul>');return e.append(t),t}function generateNavEl(e,t){var o=$('<a class="nav-link"></a>');o.attr("href","#"+e),o.text(t);var n=$("<li></li>");return n.append(o),n}function generateNavItem(e){var t=e.id,o=$(e);return generateNavEl(t,o.data("toc-text")||o.text())}function getTopLevel(e){for(var t=1;t<=6;t++){if(findOrFilter(e,"h"+t).length>1)return t}return 1}function getHeadings(e,t){return findOrFilter(e,"h"+t+","+("h"+(t+1)))}function getNavLevel(e){return parseInt(e.tagName.charAt(1),10)}function populateNav(e,t,o){var n,l=e;o.each((function(o,a){var r=generateNavItem(a);getNavLevel(a)===t?l=e:n&&l===e&&(l=createChildNavList(n)),l.append(r),n=r}))}function getResponsiveBreakpoint(){var e={xs:"d-none",sm:"d-sm-none",md:"d-md-none",lg:"d-lg-none",xl:"d-xl-none"},t="",o=$("<div>");o.appendTo($("body"));for(var n=Object.keys(e).length-1;n>=0&&(t=Object.keys(e)[n],o.addClass(e[t]),!o.is(":hidden"));n--);return o.remove(),t}var tokenType={MARK:0,MASK:1},tokenLiteral={MASK:"::MASK::"};function tokenize(e){for(var t,o,n=["\\\\\\$","\\$\\$(?:[^\\\\]|\\\\.)*?\\$\\$","\\$(?:[^$\\\\]|\\\\.)+?\\$",tokenLiteral.MASK].join("|"),l=new RegExp(n,"g"),a=[],r=0;null!==(t=l.exec(e));)t.index>r&&(o=e.substring(r,t.index),a.push([tokenType.MARK,o])),a.push([tokenType.MASK,t[0]]),r=l.lastIndex;return o=e.substring(r),e.length>r&&a.push([tokenType.MARK,o]),a}function protectMath(e){for(var t=tokenize(e),o="",n=[],l=0;l<t.length;l++)t[l][0]==tokenType.MARK?o+=t[l][1]:(n.push(l),o+=tokenLiteral.MASK);o=marked(o);var a=new RegExp(tokenLiteral.MASK,"g"),r=0;return o=o.replace(a,(function(){return t[n[r++]][1]}))}function detectBrowser(){var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,o=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),n=!!document.documentMode,l=!n&&!!window.StyleMedia,a=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);a&&navigator.userAgent.indexOf("Edg");e?$("#browser").addClass("fa fa-opera"):t?$("#browser").addClass("fa fa-firefox"):o?$("#browser").addClass("fa fa-safari"):n?$("#browser").addClass("fa fa-internet-explorer"):l?$("#browser").addClass("fa fa-edge"):a?$("#browser").addClass("fa fa-chrome"):$("#browser").addClass("fa fa-mouse-pointer")}function toggleLock(){if(locked)for(id in locked=!1,cells)cells[id].setOption("readOnly",!1);else for(id in locked=!0,cells)cells[id].setOption("readOnly",!0);$("#lock").toggleClass("fa-lock"),$("#lock").toggleClass("fa-unlock-alt")}function toggleTS(){useTS=!useTS,$("#usets").toggleClass("fa-toggle-on"),$("#usets").toggleClass("fa-toggle-off")}function reset(){$("#sandbox")[0].contentWindow.location.reload(!0)}function undo(e){locked||NaN!=selected&&cells[e].undo()}function redo(e){locked||NaN!=selected&&cells[e].redo()}function main(){document.getElementById("file-input").addEventListener("change",readSingleFile,!1),document.getElementById("file-input").addEventListener("click",(function(){this.value=null}),!1),document.getElementById("nextcell").addEventListener("change",(function(){nextcell||scrollcell?nextcell&&!scrollcell?($("#nextcell").prop("checked",!0),scrollcell=!0):nextcell&&scrollcell&&($("#nextcell").prop("checked",!1),nextcell=!1,scrollcell=!1):($("#nextcell").prop("indeterminate",!0),nextcell=!0)})),$("#nextcell").prop("indeterminate",!0),document.getElementById("switchengine").addEventListener("change",(function(){engine="eval5"==engine?"evil":"eval5"})),$("#switchengine").prop("checked",!0),$(document).on("dragenter",(function(e){e.stopPropagation(),e.preventDefault()})),$(document).on("dragover",(function(e){e.stopPropagation(),e.preventDefault()})),$(document).on("drop",(function(e){e.preventDefault(),(file=e.originalEvent.dataTransfer.files[0])&&reader.readAsText(file)})),reader.onload=function(e){var t=e.target.result;try{fromJSON(JSON.parse(t)),$("#filename").val(file.name)}catch(e){console.log(e)}finally{file=void 0,t=void 0}},window.addEventListener("resize",(function(){"xl"==getResponsiveBreakpoint()?runMD():($("#toc").empty(),$(`#cell${selected}`).find(".btn-group").hide())}));var e=new marked.Renderer;e.link=function(e,t,o){var n=marked.Renderer.prototype.link.apply(this,arguments);return n.replace("<a","<a target='_blank'")},marked.setOptions({renderer:e,gfm:!0}),detectBrowser()}$(document).ready((function(){main()}));</script>
  </body>
</html>
